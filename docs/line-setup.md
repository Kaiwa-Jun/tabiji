# LINE Developers 設定ガイド（Issue #21）

このドキュメントは、GitHub issue #21「LINE Developers 設定（チャンネル作成・LIFF登録）」の詳細な実装手順書です。

---

## 📋 目次

1. [概要](#概要)
2. [事前準備](#事前準備)
3. ✅ [ステップ1: LINE Developersアカウント作成（完了）](#ステップ1-line-developersアカウント作成完了)
4. ✅ [ステップ2: プロバイダーについて（事前理解・完了）](#ステップ2-プロバイダーについて事前理解完了)
5. ✅ [ステップ3: LINE公式アカウント作成とMessaging API有効化（完了）](#ステップ3-line公式アカウント作成とmessaging-api有効化完了)
6. ✅ [ステップ4: Messaging API設定の調整（完了）](#ステップ4-messaging-api設定の調整完了)
7. ✅ [ステップ5: Channel Access Token取得（完了）](#ステップ5-channel-access-token取得完了)
8. ✅ [ステップ6: Channel Secret取得（完了）](#ステップ6-channel-secret取得完了)
9. ✅ [ステップ7: LIFF アプリ登録（完了）](#ステップ7-liff-アプリ登録完了)
10. ✅ [ステップ8: 環境変数の設定（完了）](#ステップ8-環境変数の設定完了)
11. [ステップ9: 動作確認](#ステップ9-動作確認)
12. [トラブルシューティング](#トラブルシューティング)
13. [参考資料](#参考資料)

---

## 概要

### このドキュメントの目的

LINE Messaging APIとLIFF（LINE Front-end Framework）を使用するための開発環境を整備します。

### 所要時間

**合計: 約25〜30分**

### 必要なもの

- ✅ LINEアカウント（個人アカウントでOK）
- ✅ PCとインターネット接続
- ✅ スマートフォン（動作確認用）
- ✅ テキストエディタまたはパスワード管理ツール（トークン保存用）

### このタスクで実施すること

- ✅ LINE Developers Consoleでの設定作業
- ✅ 環境変数の準備（`.env.local`への記載）
- ✅ Botの友だち追加確認

### このタスクで実施しないこと

- ❌ コード実装（issue #22以降で実施）
- ❌ Vercelデプロイ（issue #27で実施）

---

## 事前準備

### 1. LINEアカウントの確認

- スマートフォンにLINEアプリがインストールされていることを確認
- LINEアカウントにログインしていることを確認

### 2. プロジェクトの確認

プロジェクトルートディレクトリに`.env.local`ファイルが存在することを確認:

```bash
ls -la .env.local
```

存在しない場合は、以下のコマンドでテンプレートをコピー:

```bash
cp .env.example .env.local
```

---

## ✅ ステップ1: LINE Developersアカウント作成（完了）

### 1-1. LINE Developers Consoleにアクセス

1. ブラウザで以下のURLを開く:

   ```
   https://developers.line.biz/console/
   ```

2. 画面が表示される

### 1-2. ログイン

1. **「LINEアカウントでログイン」**ボタンをクリック

2. LINEログイン画面が表示される
   - スマートフォンのLINEアプリで本人確認を行う場合がある
   - QRコードが表示される場合は、スマホのLINEアプリでスキャン

3. 初回ログイン時、**利用規約への同意**が求められる
   - 「LINE Developers Agreement」を確認
   - 「同意する」にチェック
   - 「同意する」ボタンをクリック

### 1-3. 開発者情報の登録（初回のみ）

初回ログイン時、以下の情報入力が求められる場合があります:

- **名前**: 開発者名（個人名でOK）
- **メールアドレス**: 連絡先メールアドレス

入力後、「登録」ボタンをクリック

### ✅ 完了確認

LINE Developers Consoleのトップ画面が表示されればOK

**所要時間: 3〜5分**

---

## ✅ ステップ2: プロバイダーについて（事前理解・完了）

### プロバイダーとは？

プロバイダーは、複数のチャンネル（Bot、LIFF等）をまとめる**組織の管理単位**です。

- 1つのプロバイダーに複数のチャンネルを作成可能
- 後から変更できないため、適切な名前を設定することが重要

### 重要な変更点（2024年9月以降）

**プロバイダーの作成タイミングが変更されました:**

- ❌ **旧方式**: 最初にLINE Developers Consoleでプロバイダーを作成
- ✅ **新方式**: Messaging API有効化時にプロバイダーを選択/作成

### このステップでの作業

**ステップ2では実際の作業はありません。**

プロバイダーは、次のステップ3でMessaging APIを有効化する際に作成します。ここでは以下の点を理解しておきましょう:

#### プロバイダー名の決定

次のステップで入力するため、あらかじめ決めておきます:

- **推奨名**: `tabiji`
- 英数字、日本語どちらでもOK
- **重要**: 一度設定すると変更できません

#### 既存プロバイダーがある場合

- 既にLINE Developersコンソールでプロバイダーを作成している場合は、それを選択可能
- 新規作成と既存選択のどちらも可能

### ✅ 完了確認

プロバイダー名を決定し、次のステップに進む準備ができればOK

**所要時間: 1分（理解のみ）**

---

## ✅ ステップ3: LINE公式アカウント作成とMessaging API有効化（完了）

### 重要なお知らせ（2024年9月4日以降の変更）

**2024年9月4日以降、Messaging APIチャンネルの作成方法が変更されました:**

- ❌ **旧方式**: LINE Developers Consoleから直接「Messaging APIチャンネル」を作成
- ✅ **新方式**: LINE公式アカウントを作成 → LINE Official Account ManagerでMessaging APIを有効化

### 新しいフロー

```
LINE公式アカウント作成
    ↓
LINE Official Account Manager
    ↓
Messaging API有効化
    ↓
Messaging APIチャンネル自動作成
```

---

### 3-1. LINE公式アカウント作成

#### LINE Business Accountへのログイン

1. ブラウザで以下のURLを開く:

   ```
   https://manager.line.biz/
   ```

2. **「アカウントを作成」**をクリック

3. ログイン方法を選択:
   - **LINEアカウントでログイン**（推奨 - 既存のLINEアカウントを使用）
   - **メールアドレスで登録**（LINEアカウントと紐づけたくない場合）

#### ビジネスマネージャー組織の作成（初回のみ）

**※ 初めてLINE公式アカウントを作成する場合のみ表示**

1. **「ビジネスマネージャーの組織との接続方法を選択してください」**画面が表示される

2. **「ビジネスマネージャーの組織を作成」**を選択

3. 組織情報を入力:

| 項目       | 入力内容              | 説明                               |
| ---------- | --------------------- | ---------------------------------- |
| **組織名** | `tabiji` または個人名 | 企業名・プロジェクト名・個人名でOK |
| **地域**   | `日本`                | 現在は日本のみ選択可能             |

4. **「作成」**ボタンをクリック

**⚠️ 注意:**

- 組織名は公開情報として扱われます
- 1法人につき認証できる組織は原則1つのみです

#### LINE Official Account の作成

1. **「LINE公式アカウントを作成」**ボタンをクリック

2. アカウント情報を入力:

| 項目              | 入力内容         | 必須    | 説明                       |
| ----------------- | ---------------- | ------- | -------------------------- |
| **アカウント名**  | `tabiji-bot`     | ✅ 必須 | Botの名前（後で変更可能）  |
| **業種**          | `旅行・レジャー` | ✅ 必須 | 大業種を選択               |
| **業種（小）**    | 適切なものを選択 | ✅ 必須 | 例: `旅行代理店`           |
| **会社/事業者名** | 個人名でOK       | ✅ 必須 | 開発者の名前または事業者名 |

3. 利用規約に同意:
   - **LINE公式アカウント利用規約**を確認
   - チェックボックスにチェック

4. **「作成」**ボタンをクリック

### 3-2. Messaging API有効化

LINE公式アカウント作成後、Messaging APIを有効化します。

**⚠️ 重要: Web版を使用してください**

Messaging APIの設定は**スマホアプリではできません**。必ず**PC/ブラウザ版**を使用してください。

#### Web版へのアクセス

1. PCのブラウザで以下のURLを開く:

   ```
   https://manager.line.biz/
   ```

2. LINEアカウントまたはメールアドレスでログイン
   - スマホアプリで作成したアカウントと同じ認証情報を使用

3. 作成したLINE公式アカウント（`tabiji-bot`）を選択

#### 設定画面への移動

1. アカウントホーム画面で、右上の**「設定」**をクリック

2. 左メニューから**「Messaging API」**を選択

#### Messaging APIを利用する

1. **「Messaging APIを利用する」**ボタンをクリック

#### 開発者情報の登録（初回のみ）

**※ LINE Developersコンソールを初めて使う場合のみ表示**

1. 開発者情報の入力画面が表示される:
   - **名前**: 開発者名（個人名でOK）
   - **メールアドレス**: 連絡先メールアドレス

2. **「登録」**をクリック

#### プロバイダーの選択

1. プロバイダー選択画面が表示される

2. **既存のプロバイダーを選択** または **新規作成**:
   - ステップ2で作成した`tabiji`プロバイダーを選択
   - または新規に`tabiji`という名前で作成

**⚠️ 重要:**

- プロバイダーは**後から変更できません**
- LINEログインチャンネルと連携する場合は、同じプロバイダーを選択する必要があります

3. **「同意する」**をクリック（Messaging API利用規約への同意）

#### 確認画面

1. 確認画面が表示される:
   - Messaging API が有効化されること
   - Messaging APIチャンネルが自動的に作成されること

2. **「OK」**をクリック

### ✅ 完了確認

以下の画面が表示されればOK:

- 「Messaging APIが有効になりました」というメッセージ
- Messaging API設定画面が表示される
- **Webhook URL**、**Channel access token**などの設定項目が見える

**所要時間: 5〜10分**

---

## ✅ ステップ4: Messaging API設定の調整（完了）

チャンネル作成後、以下の設定を調整します。

### 4-1. 応答メッセージの無効化

#### なぜ無効化するのか？

- デフォルトではLINE公式アカウントの自動応答機能が有効
- Webhookで独自の応答を実装するため、自動応答は無効化

#### 設定手順

1. チャンネル設定画面で**「Messaging API設定」**タブを開く

2. **「LINE公式アカウント機能」**セクションを探す

3. **「編集」**リンクをクリック
   - LINE Official Account Manager（別タブ）が開く

4. **「応答設定」**を選択（左メニュー）

5. 以下のように設定:
   - **応答メッセージ**: `オフ` ← 重要！
   - **あいさつメッセージ**: `オン` ← 友だち追加時のメッセージ
   - **Webhook**: `オン` ← 後で設定

6. 設定を保存

7. LINE Developers Consoleのタブに戻る

### 4-2. Webhook URL設定（仮設定）

#### なぜ仮設定なのか？

- この段階ではまだアプリをデプロイしていない
- 正式なURLは issue #27（Vercelデプロイ）で設定

#### 設定手順

1. **「Messaging API設定」**タブの**「Webhook設定」**セクションを探す

2. **「Webhook URL」**欄に仮のURLを入力:

   ```
   https://example.com/api/webhook
   ```

3. **「Webhookの利用」**を`オン`に設定

4. **「更新」**ボタンをクリック

### ✅ 完了確認

- 応答メッセージが「オフ」になっている
- Webhook URLが設定されている
- Webhookの利用が「オン」になっている

**所要時間: 5〜7分**

---

## ✅ ステップ5: Channel Access Token取得（完了）

### Channel Access Tokenとは？

LINE Messaging APIを呼び出すための**認証トークン**です。このトークンを使ってBotからメッセージを送信できます。

### トークンの種類

| 種類                     | 有効期間   | 推奨            |
| ------------------------ | ---------- | --------------- |
| **短期トークン**         | 30日       | ❌ 開発には不便 |
| **長期トークン（v2.1）** | 任意の期間 | ✅ 開発に推奨   |

### ⚠️ 重要: LINE Developers Consoleで発行してください

**Channel Access Tokenは LINE Official Account Manager では発行できません。**

必ず **LINE Developers Console** で発行する必要があります。

### 5-1. LINE Developers Consoleにアクセス

1. PCのブラウザで以下のURLを開く:

   ```
   https://developers.line.biz/console/
   ```

2. LINEアカウントでログイン（既にログイン済みの場合はスキップ）

### 5-2. チャンネルを選択

1. **プロバイダー「tabiji」**をクリック

2. **Messaging APIチャンネル**を選択
   - チャンネル名は公式アカウント名と同じ（例: `tabiji-bot`）
   - Channel IDが表示されている

### 5-3. Messaging API設定タブを開く

1. チャンネル画面で**「Messaging API設定」**タブをクリック

2. ページをスクロールして**「チャネルアクセストークン（長期）」**セクションを探す

### 5-4. トークン発行

1. **「発行」**ボタンをクリック

2. 有効期間を選択:
   - **推奨**: `0`（無期限）
   - または長期間（例: 3650日 = 10年）

3. トークンが表示される
   - **形式**: 長い英数字の文字列（約170文字以上）
   - 例: `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

### 5-5. トークンの保存

**⚠️ 重要: トークンは一度しか表示されません！**

以下のいずれかの方法で安全に保存:

1. **パスワード管理ツール**（推奨）
   - 1Password、Bitwarden、LastPass等
   - 項目名: `LINE - tabiji-bot - Channel Access Token`

2. **一時的にテキストエディタ**
   - 後で`.env.local`に設定するまでの一時保存
   - ファイルは保存せず、メモリ上のみで保持

### ✅ 完了確認

トークンがコピーされ、安全に保存されていればOK

**所要時間: 2〜3分**

---

## ✅ ステップ6: Channel Secret取得（完了）

### Channel Secretとは？

Webhookで受信したリクエストが**LINE公式からのものか検証**するための秘密鍵です。

### 6-1. シークレット取得

1. チャンネル設定画面で**「Basic settings」**タブを開く

2. **「Channel secret」**セクションを探す

3. **「表示」**ボタンをクリック

4. シークレットキーが表示される
   - **形式**: 32文字の英数字
   - 例: `a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6`

### 6-2. シークレットの保存

ステップ5と同様に安全に保存:

- パスワード管理ツール: `LINE - tabiji-bot - Channel Secret`
- または一時的にテキストエディタ

### ✅ 完了確認

シークレットキーがコピーされ、安全に保存されていればOK

**所要時間: 1〜2分**

---

## ✅ ステップ7: LIFF アプリ登録（完了）

### LIFFアプリとは？

**LINE Front-end Framework（LIFF）**は、LINE内で動作するWebアプリケーションです。

- LINE内ブラウザで動作
- LINEログインによるユーザー認証
- プロフィール情報の取得

### ⚠️ 重要: LINEログインチャンネルが必要です

**2019年11月11日以降、Messaging APIチャンネルにはLIFFアプリを追加できません。**

LIFFアプリを作成するには、**LINEログインチャンネル**を別途作成する必要があります。

### 7-1. LINE Developers Consoleにアクセス

1. PCのブラウザで以下のURLを開く:

   ```
   https://developers.line.biz/console/
   ```

2. プロバイダー「tabiji」を選択

### 7-2. LINEログインチャンネルを作成

1. **「新規チャンネル作成」**ボタンをクリック

2. チャンネルタイプで**「LINEログイン」**を選択

3. チャンネル情報を入力:

| 項目               | 入力内容            | 説明                       |
| ------------------ | ------------------- | -------------------------- |
| **チャンネル名**   | `tabiji-liff`       | LIFFアプリ用のチャンネル名 |
| **チャンネル説明** | `tabiji LIFFアプリ` | 説明文                     |
| **アプリタイプ**   | `ウェブアプリ`      | LIFFはウェブアプリ         |

4. 利用規約に同意して**「作成」**ボタンをクリック

### 7-3. LIFFアプリを追加

1. 作成したLINEログインチャンネル（`tabiji-liff`）の設定画面を開く

2. **「LIFF」**タブをクリック

3. **「追加」**ボタンをクリック

### 7-4. LIFF app設定の入力

| 項目                             | 入力内容                         | 説明                          |
| -------------------------------- | -------------------------------- | ----------------------------- |
| **LIFF app name**                | `tabiji-app`                     | LIFFアプリの名前（管理用）    |
| **サイズ**                       | `Full`                           | 全画面表示（推奨）            |
| **エンドポイントURL**            | `https://example.com/liff/plans` | 仮設定（後で変更）            |
| **Scope**                        | `profile`, `openid`              | 必須スコープ（詳細は下記）    |
| **Bot link feature**             | `On (Normal)`                    | LIFFからBotトークに戻れる機能 |
| **Bot link feature - Botの選択** | `tabiji-bot`                     | 連携するMessaging APIのBot    |

#### サイズの種類

| サイズ      | 画面の高さ | 用途                      |
| ----------- | ---------- | ------------------------- |
| **Compact** | 50%        | 簡易的な入力フォーム      |
| **Tall**    | 80%        | 中程度のコンテンツ        |
| **Full**    | 100%       | 本格的なアプリ（✅ 推奨） |

#### Scopeの種類と選択

| Scope                | 説明                     | 今回の選択 |
| -------------------- | ------------------------ | ---------- |
| `profile`            | ユーザー名・アイコン取得 | ✅ 必須    |
| `openid`             | 認証トークン取得         | ✅ 必須    |
| `email`              | メールアドレス取得       | ☑️ 不要    |
| `chat_message.write` | メッセージ送信           | ☑️ 不要    |

**今回の設定:**

- ✅ `profile`
- ✅ `openid`
- ☑️ `email` - チェックしない
- ☑️ `chat_message.write` - チェックしない

#### Bot link featureとは？

LIFFアプリとMessaging API Botを連携させる機能です。

| 設定                | 動作                                                      | 推奨度              |
| ------------------- | --------------------------------------------------------- | ------------------- |
| **On (Normal)**     | ユーザーが自分でボタンを押してBotトークに遷移・友だち追加 | ✅ 推奨             |
| **On (Aggressive)** | LIFFアプリを開いた瞬間に友だち追加確認画面を表示          | ⚠️ 押し付けがましい |
| **Off**             | LIFFとBotが完全に独立（連携なし）                         | ❌ 非推奨           |

**tabijiでの推奨設定**: `On (Normal)` - ユーザー体験を尊重しつつ、自然な友だち追加を促進

### 7-5. LIFFアプリの作成

1. すべての項目を入力

2. **「追加」**ボタンをクリック

3. LIFF IDが生成される
   - **形式**: `1234567890-AbcdEfgh`（数字-英数字）
   - 例: `2008239543-7vLMjwjj`

### 7-6. LIFF IDの保存と環境変数設定

LIFF IDは`.env.local`に保存します（コード内で使用するため）。

#### `.env.local`への設定

プロジェクトルートの`.env.local`を開いて、以下のように設定:

```env
# LIFF ID
# 取得方法: LINE Developers Console > LINEログインチャンネル > LIFF > LIFF ID
# 形式: 1234567890-abcdefgh
NEXT_PUBLIC_LIFF_ID=あなたのLIFF_ID
```

**⚠️ 注意**:

- フロントエンドで使用するため`NEXT_PUBLIC_`プレフィックスが必須
- `"`で囲まない
- `=`の前後にスペースを入れない

#### LIFF URL（参考情報）

ユーザーがLIFFアプリにアクセスする際のURLは以下です:

```
https://liff.line.me/あなたのLIFF_ID
```

このURLは開発中のテストやQRコード生成時に使用できます。

### ✅ 完了確認

- LINEログインチャンネル「tabiji-liff」が作成されている
- LIFFアプリ「tabiji-app」が登録されている
- LIFF IDが`.env.local`に`NEXT_PUBLIC_LIFF_ID`として設定されている

**所要時間: 5〜10分**

---

## ✅ ステップ8: 環境変数の設定（完了）

### 環境変数の確認

すでにステップ5〜7で`.env.local`に必要な環境変数を設定しています。
ここでは、正しく設定されているか確認します。

### 8-1. 環境変数の確認

プロジェクトルートで以下のコマンドを実行:

```bash
# LINE関連の環境変数が設定されているか確認
grep "^LINE_CHANNEL_ACCESS_TOKEN=" .env.local | head -c 50
grep "^LINE_CHANNEL_SECRET=" .env.local
grep "^NEXT_PUBLIC_LIFF_ID=" .env.local
```

**期待される出力:**

```bash
LINE_CHANNEL_ACCESS_TOKEN=あなたのトークンの先頭...  # トークンの先頭部分
LINE_CHANNEL_SECRET=あなたのチャンネルシークレット
NEXT_PUBLIC_LIFF_ID=あなたのLIFF_ID
```

### 8-2. `.env.local`の完全な内容（参考）

```env
# -----------------------------------------------------------------------------
# LINE Developers（フェーズ2で設定）
# -----------------------------------------------------------------------------
# LINE チャンネルアクセストークン
LINE_CHANNEL_ACCESS_TOKEN=あなたのチャンネルアクセストークン

# LINE チャンネルシークレット
LINE_CHANNEL_SECRET=あなたのチャンネルシークレット

# LIFF ID
NEXT_PUBLIC_LIFF_ID=あなたのLIFF_ID
```

### ✅ 完了確認

以下の3つの環境変数が`.env.local`に設定されていればOK:

- `LINE_CHANNEL_ACCESS_TOKEN`
- `LINE_CHANNEL_SECRET`
- `NEXT_PUBLIC_LIFF_ID`

**所要時間: 1〜2分（確認のみ）**

---

## ステップ9: 動作確認

### 9-1. QRコードの表示

1. LINE Developers Console > チャンネル設定 > **「Messaging API設定」**タブ

2. **「Bot情報」**セクションまでスクロール

3. **「QRコード」**の画像を確認
   - スマートフォンでスキャンするためそのまま表示しておく

### 9-2. スマホで友だち追加

1. スマートフォンでLINEアプリを開く

2. ホーム画面右上の**「友だち追加」**ボタンをタップ

3. **「QRコード」**を選択

4. PCに表示されているQRコードをスキャン

5. Botの情報が表示される
   - Bot名: `tabiji-bot`（または設定した名前）
   - チャンネル説明が表示される

6. **「追加」**ボタンをタップ

### 9-3. あいさつメッセージの確認

友だち追加直後、自動で**あいさつメッセージ**が表示される

- デフォルトのメッセージ（例: 「友だち追加ありがとうございます」）
- 表示されればOK（内容は後でカスタマイズ可能）

### 9-4. メッセージ送信テスト（現時点では応答なし）

1. Botにメッセージを送信してみる
   - 例: 「こんにちは」

2. **現時点では返信がない**
   - これは正常（Webhookをまだ実装していないため）
   - issue #22以降でWebhook実装後、エコーバックが動作する

### ✅ 完了確認

- Botを友だち追加できた
- あいさつメッセージが表示された

**所要時間: 2〜3分**

---

## トラブルシューティング

### Q1: LINE Developers Consoleにログインできない

**原因:**

- LINEアカウントが無効
- 2段階認証の問題

**解決策:**

1. LINEアプリが最新版か確認
2. LINEアプリで本人確認を完了
3. 別のブラウザで試す

---

### Q2: プロバイダーが作成できない

**原因:**

- 利用規約に同意していない
- ネットワークエラー

**解決策:**

1. すべての利用規約にチェックが入っているか確認
2. ページをリロードして再試行
3. ブラウザのキャッシュをクリア

---

### Q3: Channel Access Tokenが発行されない

**原因:**

- チャンネルが正しく作成されていない
- ブラウザの問題

**解決策:**

1. ページをリロード
2. 「Basic settings」タブでチャンネルIDが存在するか確認
3. 別のブラウザで試す

---

### Q4: あいさつメッセージが表示されない

**原因:**

- 応答設定で「あいさつメッセージ」がオフ

**解決策:**

1. LINE Official Account Managerを開く
2. 応答設定 > あいさつメッセージ > `オン`に設定
3. Botをブロック→ブロック解除→再度友だち追加

---

### Q5: 環境変数が読み込まれない

**原因:**

- `.env.local`の形式エラー
- 環境変数名のtypo

**解決策:**

1. 環境変数名が正確か確認（スペース、大文字小文字）
2. `=`の前後にスペースがないか確認
3. 値を`"`で囲まない（Next.jsでは不要）

正しい例:

```env
LINE_CHANNEL_ACCESS_TOKEN=eyJhbGciOi...
```

間違った例:

```env
LINE_CHANNEL_ACCESS_TOKEN = "eyJhbGciOi..."  # スペースと"が不要
```

---

## 完了条件チェックリスト

以下をすべて満たせば、issue #21は完了です:

### ✅ 完了済み

- [x] LINE Developersアカウントが作成されている
- [x] ビジネスマネージャー組織「tabiji」が作成されている（初回のみ）
- [x] LINE公式アカウント「tabiji-bot」が作成されている
- [x] Web版LINE Official Account ManagerでMessaging APIが有効化されている
- [x] プロバイダー「tabiji」が作成されている
- [x] Messaging APIチャンネルが自動作成されている
- [x] Channel IDが表示されている
- [x] Channel Secretが表示されている
- [x] 応答メッセージが無効化されている（ステップ4）
- [x] あいさつメッセージが有効化されている（ステップ4）
- [x] Webhook URLが仮設定されている（ステップ4）
- [x] Webhookの利用が「オン」になっている（ステップ4）
- [x] Channel Access Tokenが取得・保存されている（ステップ5）
- [x] Channel Secretがコピー・保存されている（ステップ6）
- [x] `.env.local`に`LINE_CHANNEL_ACCESS_TOKEN`が設定されている
- [x] `.env.local`に`LINE_CHANNEL_SECRET`が設定されている
- [x] LINEログインチャンネル「tabiji-liff」が作成されている（ステップ7）
- [x] LIFFアプリ「tabiji-app」が登録されている（ステップ7）
- [x] LIFF IDが取得されている（ステップ7）
- [x] `.env.local`に`NEXT_PUBLIC_LIFF_ID`が設定されている（ステップ7〜8）
- [x] 3つの環境変数が正しく設定されている（ステップ8）

### ⏳ 次に進むステップ

- [ ] スマホでBotを友だち追加できる（ステップ9）
- [ ] あいさつメッセージが表示される（ステップ9）

---

## 次のステップ

issue #21完了後は、以下のissueに進みます:

- **issue #22**: LIFF SDK統合（初期化・ラッパー）- コード実装開始
- **issue #27**: Vercel デプロイ・Webhook設定（正式なURL設定）- 本番環境構築

---

## 参考資料

### 公式ドキュメント

- [LINE Developers Console](https://developers.line.biz/console/)
- [LINE Messaging API - Getting Started](https://developers.line.biz/ja/docs/messaging-api/getting-started/)
- [LIFF - Getting Started](https://developers.line.biz/ja/docs/liff/getting-started/)
- [LINE Messaging API Reference](https://developers.line.biz/ja/reference/messaging-api/)
- [LIFF API Reference](https://developers.line.biz/ja/reference/liff/)

### プロジェクト内ドキュメント

- `docs/tech-stack.md`: LINE関連の技術スタック
- `docs/features.md`: LINE Bot機能の仕様
- `docs/implementation-plan.md`: フェーズ2全体の実装計画
- `CLAUDE.md`: プロジェクト開発ガイド

---

## 付録: ローカル開発のヒント（オプション）

### ngrokを使用したローカルWebhookテスト

issue #22以降でWebhook実装を行う際、ローカル環境でテストしたい場合は**ngrok**を使用できます。

#### ngrokのインストール

```bash
# Homebrewでインストール（macOS）
brew install ngrok

# または公式サイトからダウンロード
# https://ngrok.com/download
```

#### 使用方法

```bash
# ターミナル1: Next.js開発サーバー起動
npm run dev

# ターミナル2: ngrok起動
ngrok http 3000
```

ngrokが表示するHTTPS URL（例: `https://abc123.ngrok.io`）をWebhook URLとして設定すれば、ローカル環境でLINEからのリクエストを受信できます。

**注意:** issue #21の段階では不要（issue #22以降で使用）

---

**ドキュメント作成日:** 2025年10月6日
**対応Issue:** [#21 LINE Developers 設定（チャンネル作成・LIFF登録）](https://github.com/Kaiwa-Jun/tabiji/issues/21)
