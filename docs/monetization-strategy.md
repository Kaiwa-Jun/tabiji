# 収益化戦略

## 概要

tabijiは「LINEで完結する旅行計画アプリ」として、スポット検索（Google Maps API）やAIルート作成などのAPI利用料金が発生します。本ドキュメントでは、API費用をカバーしながら持続的に成長できる収益化戦略を定義します。

## 基本方針

**フリーミアムモデル + 広告（段階的導入）**

- 無料プランで多くのユーザーを獲得
- 広告収益でAPI費用をカバー
- 有料プランで付加価値を提供し、収益を拡大

## フェーズ1：初期（ユーザー獲得重視）

### 目標

- ユーザーベースの構築
- アプリの認知度向上
- 基本的なAPI費用のカバー

### 提供内容

#### 無料プラン

| 機能         | 制限                       |
| ------------ | -------------------------- |
| プラン作成   | 月3件まで                  |
| スポット検索 | 基本的な検索（制限あり）   |
| ルート生成   | 徒歩ルートのみ             |
| 広告表示     | あり（控えめなバナー広告） |

#### 広告戦略

- **配置場所**: LIFFアプリの下部のみ（UXを損なわない範囲）
- **広告種別**: 旅行関連広告を優先（Googleアドセンス）
- **想定収益**: 1ユーザーあたり月5円（RPM: 500円想定）

## フェーズ2：成長期（有料プラン導入）

### 目標

- 収益の多様化
- ヘビーユーザーの満足度向上
- API費用の完全カバー + 利益創出

### プラン設計

#### 無料プラン

- **価格**: ¥0
- **機能**:
  - 月3件までのプラン作成
  - 基本的なスポット検索
  - 徒歩ルートのみ
  - 広告表示あり

#### ベーシックプラン

- **価格**: ¥300/月（税込）
- **機能**:
  - ✅ 無制限のプラン作成
  - ✅ 広告非表示
  - ✅ 複数移動手段（電車・車）
  - ✅ 詳細な移動時間表示

#### プレミアムプラン

- **価格**: ¥600/月（税込）
- **機能**:
  - ✅ ベーシックプランの全機能
  - ✅ **AI旅程最適化**（GPT-4o Mini/GPT-4o使用）
    - 営業時間・混雑状況を考慮した最適化
    - 最適化の理由説明
    - 複数の代替案提示（移動優先/体験重視）
    - スポット追加時の自動調整提案
    - パーソナライズされたスポット推薦
    - AIチャットコンシェルジュ（Phase 3実装予定）
    - 旅行後の振り返りレポート生成（Phase 3実装予定）
  - ✅ スタート/ゴール地点設定
  - ✅ リマインダー通知
  - ✅ 優先サポート

詳細な機能説明は[機能仕様書のAI機能セクション](./features.md#-ai機能プレミアムプラン限定)を参照してください。

### 価格設定の根拠

1. **若年層の支払い意欲**: 10〜30代はNetflix/Spotify的な定額制に慣れている
2. **心理的価格**: 月300円は「コーヒー1杯分」で納得感がある
3. **旅行の価値**: 年間3,600円でも、旅行1回の価値があれば十分にペイする

## 実装の優先順位

### Phase 1: 広告導入（今すぐ実装）

#### 技術スタック

- **広告プラットフォーム**: Google AdSense
- **配置場所**: LIFFアプリの下部（固定バナー）

#### 実装イメージ

```typescript
// components/ads/bottom-banner.tsx
'use client'

export function BottomBanner() {
  return (
    <div className="fixed bottom-0 left-0 right-0 bg-gray-100 p-2 z-10">
      <ins className="adsbygoogle"
           style={{ display: 'block' }}
           data-ad-client="ca-pub-XXXXXXXX"
           data-ad-slot="XXXXXXXXXX"
           data-ad-format="horizontal" />
    </div>
  )
}
```

#### チェックリスト

- [ ] Google AdSenseアカウント作成
- [ ] 広告コードの取得
- [ ] LIFFアプリへの組み込み
- [ ] 広告表示テスト
- [ ] UX確認（広告が邪魔にならないか）

### Phase 2: 有料プラン機能（MVP後、3〜6ヶ月後）

#### データベース設計

```sql
-- usersテーブルにサブスクリプション情報を追加
ALTER TABLE users ADD COLUMN subscription_tier VARCHAR(20) DEFAULT 'free';
ALTER TABLE users ADD COLUMN subscription_expires_at TIMESTAMP;
ALTER TABLE users ADD COLUMN stripe_customer_id VARCHAR(255);
ALTER TABLE users ADD COLUMN stripe_subscription_id VARCHAR(255);

-- プラン作成数の制限チェック用
CREATE INDEX idx_users_subscription ON users(subscription_tier, subscription_expires_at);
```

#### 決済システム

- **推奨**: Stripe（実装が簡単、サブスク管理機能が充実）
- **代替**: LINE Pay（LINEユーザーとの親和性が高い）

#### 機能制限の実装

```typescript
// lib/subscription-limits.ts
export const PLAN_LIMITS = {
  free: {
    maxPlansPerMonth: 3,
    adsEnabled: true,
    transportModes: ['walking'],
    aiOptimizationEnabled: false,
  },
  basic: {
    maxPlansPerMonth: Infinity,
    adsEnabled: false,
    transportModes: ['walking', 'transit', 'driving'],
    aiOptimizationEnabled: false,
  },
  premium: {
    maxPlansPerMonth: Infinity,
    adsEnabled: false,
    transportModes: ['walking', 'transit', 'driving'],
    aiOptimizationEnabled: true,
  },
}

// 使用例
export async function checkPlanCreationLimit(userId: string): Promise<boolean> {
  const user = await getUser(userId)
  const tier = user.subscription_tier

  if (tier === 'free') {
    const plansThisMonth = await countUserPlansThisMonth(userId)
    return plansThisMonth < PLAN_LIMITS.free.maxPlansPerMonth
  }

  return true // basic/premiumは無制限
}
```

#### チェックリスト

- [ ] Stripeアカウント作成
- [ ] サブスクリプション商品の登録
- [ ] Webhook設定（支払い成功/失敗/キャンセル）
- [ ] データベーススキーマ更新
- [ ] 機能制限ロジックの実装
- [ ] 決済フローの実装
- [ ] 管理画面（サブスクリプション状況確認）
- [ ] テスト決済の実施

## 収益シミュレーション

### 目標ユーザー数（6ヶ月後）

| プラン       | ユーザー数 | 月額単価 | 月間収益    |
| ------------ | ---------- | -------- | ----------- |
| 無料（広告） | 800人      | -        | ¥4,000      |
| ベーシック   | 50人       | ¥300     | ¥15,000     |
| プレミアム   | 20人       | ¥600     | ¥12,000     |
| **合計**     | **870人**  | -        | **¥31,000** |

### コスト見積もり（詳細版）

#### 前提条件

**ユーザー数（6ヶ月後想定）:**

- 無料プラン: 800人（月3件制限）
- ベーシックプラン: 50人（無制限）
- プレミアムプラン: 20人（無制限 + AI機能）
- **合計**: 870人

**プラン作成数（月間）:**

- 無料ユーザー: 800人 × 2.5件/月 = 2,000プラン
- ベーシックユーザー: 50人 × 8件/月 = 400プラン
- プレミアムユーザー: 20人 × 10件/月 = 200プラン
- **合計**: 2,600プラン/月

**1プランあたりのAPI使用量:**

- スポット検索: 平均15回/プラン（エリア選択、キーワード検索、追加検索）
- ルート計算: 平均8回/プラン（2泊3日×3日-1 + 微調整×5回）
- 地図表示: 10,000回/月（全ユーザーの地図閲覧）
- AI最適化: プレミアムユーザーのみ（200プラン/月）

---

#### 1. Google Maps API

##### Places API (New)

**料金体系（2025年3月〜）:**

- 無料枠: 10,000リクエスト/月
- 0-100,000リクエスト: $2.83/1,000リクエスト（約¥425/1,000リクエスト、$1=¥150換算）

**月間使用量:**

- スポット検索: 2,600プラン × 15回 = 39,000リクエスト
- 無料枠適用後: 39,000 - 10,000 = 29,000リクエスト（有料）

**月額コスト:**

- 29,000 ÷ 1,000 × ¥425 = **¥12,325**

##### Directions API (Legacy)

**料金体系:**

- 無料枠: 10,000リクエスト/月
- 0-100,000リクエスト: $5.00/1,000リクエスト（約¥750/1,000リクエスト）

**月間使用量:**

- ルート計算: 2,600プラン × 8回 = 20,800リクエスト
- 無料枠適用後: 20,800 - 10,000 = 10,800リクエスト（有料）

**月額コスト:**

- 10,800 ÷ 1,000 × ¥750 = **¥8,100**

##### Maps JavaScript API

**料金体系:**

- 無料枠: 10,000動的読み込み/月
- 0-100,000リクエスト: $7.00/1,000リクエスト（約¥1,050/1,000リクエスト）

**月間使用量:**

- 地図表示: 10,000回/月（プラン閲覧時の地図読み込み）
- 無料枠内のため: **¥0**

**Google Maps API合計: ¥20,425/月**

---

#### 2. OpenAI API（プレミアムプラン向けAI機能）

##### GPT-4o Mini（推奨モデル）

**料金体系:**

- Input: $0.15/100万トークン（約¥22.5/100万トークン）
- Output: $0.60/100万トークン（約¥90/100万トークン）

**1プランあたりのトークン使用量:**

- Input（プロンプト）: 約500トークン（スポット情報、日程、制約条件）
- Output（最適化ルート）: 約300トークン（旅程提案、理由説明）

**月間使用量（プレミアムユーザーのみ）:**

- 200プラン × 500トークン = 100,000 input tokens
- 200プラン × 300トークン = 60,000 output tokens

**月額コスト:**

- Input: 0.1M × ¥22.5 = ¥2.25
- Output: 0.06M × ¥90 = ¥5.4
- **合計: ¥7.65（約¥10）**

**注:** 実際にはGPT-4o（より高性能）を使用する可能性もあるため、安全マージンとして **¥1,500〜¥3,000/月** を想定

---

#### 3. LINE Messaging API

**料金体系（日本）:**

| プラン   | 無料メッセージ | 月額料金 | 追加メッセージ |
| -------- | -------------- | -------- | -------------- |
| Free     | 200通/月       | ¥0       | 送信不可       |
| Light    | 5,000通/月     | ¥5,000   | 送信不可       |
| Standard | 30,000通/月    | ¥15,000  | ¥3/通          |

**月間送信数（想定）:**

- プラン作成完了通知: 2,600通
- リマインダー通知（将来実装）: 月200通
- **合計: 2,800通/月**

**推奨プラン: Light（¥5,000/月）**

ただし、MVP段階では **Free プラン（¥0）** で開始し、送信数が200通を超える場合はプッシュ通知を制限するか、ユーザーに通知設定を促す戦略も検討。

**月額コスト: ¥0〜¥5,000**

---

#### 4. Supabase

**料金体系:**

- Free Tier: 500MB Database + 5GB Bandwidth/月 + 50,000 Monthly Active Users
- Pro Tier: $25/月（約¥3,750/月）

**想定使用量（6ヶ月後）:**

- ユーザー数: 870人（Free Tier内）
- データベースサイズ: 約50MB（プラン、スポット、ユーザー情報）
- Bandwidth: 約2GB/月

**月額コスト: ¥0（Free Tier内）**

---

#### 5. Vercel

**料金体系:**

- Hobby Tier: 無料（個人プロジェクト向け）
- Pro Tier: $20/月（約¥3,000/月）

**想定使用量:**

- リクエスト数: 約100,000リクエスト/月（Hobby Tierの上限: 100GB bandwidth）
- ビルド時間: 100時間/月（Hobby Tier内）

**月額コスト: ¥0（Hobby Tier内）**

**注:** 商用利用の場合、Pro Tierへのアップグレードが必要になる可能性あり（**¥3,000/月**）

---

#### コスト総括

| 項目               | MVP段階（〜3ヶ月） | 成長期（3〜6ヶ月）   | 備考                   |
| ------------------ | ------------------ | -------------------- | ---------------------- |
| Google Maps API    | ¥5,000〜¥8,000     | ¥15,000〜¥20,425     | プラン数に比例して増加 |
| OpenAI API         | ¥0                 | ¥1,500〜¥3,000       | プレミアムプラン導入後 |
| LINE Messaging API | ¥0                 | ¥0〜¥5,000           | 200通超過時にLight移行 |
| Supabase           | ¥0                 | ¥0                   | Free Tier内で運用可能  |
| Vercel             | ¥0                 | ¥0〜¥3,000           | 商用利用時Pro移行      |
| **合計**           | **¥5,000〜¥8,000** | **¥16,500〜¥31,425** | -                      |

---

### 収支予測

#### MVP段階（〜3ヶ月）

| 項目             | 金額                    |
| ---------------- | ----------------------- |
| 収益（広告のみ） | ¥2,000/月               |
| コスト           | ¥5,000〜¥8,000/月       |
| **収支**         | **-¥3,000〜-¥6,000/月** |

**赤字想定:** 初期は広告収益のみのため赤字。ユーザー獲得に注力する期間。

#### 成長期（3〜6ヶ月後）

| 項目                       | 金額                   |
| -------------------------- | ---------------------- |
| 広告収益                   | ¥4,000/月              |
| サブスク収益（ベーシック） | ¥15,000/月             |
| サブスク収益（プレミアム） | ¥12,000/月             |
| **収益合計**               | **¥31,000/月**         |
| コスト                     | ¥16,500〜¥31,425/月    |
| **収支**                   | **-¥425〜+¥14,500/月** |

**黒字化達成（楽観シナリオ）:** API使用を最適化し、コストを¥20,000以下に抑えれば月¥11,000の利益。

---

### コスト最適化戦略

#### 短期施策（すぐ実装可能）

1. **API呼び出しのキャッシング**
   - 同じエリアのスポット検索結果をキャッシュ（24時間）
   - Places API使用量を30%削減: ¥12,325 → **¥8,628** (-¥3,697)

2. **ルート計算の最適化**
   - 初回計算結果をDBに保存し、微調整時は差分計算のみ実行
   - Directions API使用量を40%削減: ¥8,100 → **¥4,860** (-¥3,240)

3. **地図の静的画像利用**
   - プラン一覧画面では Maps Static API（無料枠: 28,000回/月）を使用
   - Maps JavaScript API使用量を0に維持

**最適化後のGoogle Maps API コスト: ¥13,488/月** (¥6,937削減)

#### 中期施策（3〜6ヶ月後）

4. **AIモデルの段階的使用**
   - 簡単なルート最適化: GPT-4o Mini（安価）
   - 複雑な最適化: GPT-4o（高性能）
   - コスト削減: 約50%

5. **プッシュ通知の最適化**
   - Reply Messages（無料）を優先活用
   - Push Messagesは重要な通知のみに限定
   - LINE API コストを¥0に維持

6. **バッチ処理の導入**
   - 複数のAPI呼び出しを1リクエストにまとめる
   - Places APIのBatch Request機能活用

**最適化後の総コスト: ¥15,000〜¥20,000/月**

---

### 損益分岐点分析

#### ユーザー数別の収支

| ユーザー数 | 広告収益 | サブスク収益 | 合計収益 | コスト  | 収支        |
| ---------- | -------- | ------------ | -------- | ------- | ----------- |
| 300人      | ¥1,500   | ¥5,400       | ¥6,900   | ¥8,000  | **-¥1,100** |
| 500人      | ¥2,500   | ¥9,000       | ¥11,500  | ¥12,000 | **-¥500**   |
| 700人      | ¥3,500   | ¥12,600      | ¥16,100  | ¥16,000 | **+¥100**   |
| 870人      | ¥4,350   | ¥15,660      | ¥20,010  | ¥20,000 | **+¥10**    |
| 1,000人    | ¥5,000   | ¥18,000      | ¥23,000  | ¥23,000 | **±¥0**     |

**損益分岐点: 約700〜870ユーザー**（有料転換率8%想定）

---

### リスクシナリオ

#### 悲観シナリオ（有料転換率3%の場合）

| 項目               | 金額           |
| ------------------ | -------------- |
| ユーザー数         | 870人          |
| 有料ユーザー       | 26人（3%）     |
| サブスク収益       | ¥7,800/月      |
| 広告収益           | ¥4,220/月      |
| **収益合計**       | **¥12,020/月** |
| コスト（最適化後） | ¥15,000/月     |
| **収支**           | **-¥2,980/月** |

**対策:**

1. 無料プランを月1件に制限し、有料転換を促進
2. 広告表示を増やす（UXとのバランスを考慮）
3. アフィリエイト導入を前倒し

---

### 前提条件まとめ

- **為替レート**: $1 = ¥150
- **広告収益**: RPM ¥500（1ユーザーあたり月5円）
- **無料→有料転換率**: 8%（業界平均3〜10%）
- **ベーシック:プレミアム比率**: 70:30
- **プラン作成数**: 無料2.5件/月、ベーシック8件/月、プレミアム10件/月
- **API最適化**: 実装済み（キャッシング、差分計算）

## その他の収益化手法（将来的な検討）

### 地域観光協会とのコラボ

- **概要**: 特定エリアのスポットを優先表示する対価として協賛金
- **想定収益**: ¥50,000〜¥100,000/地域/年
- **実装時期**: ユーザー数1,000人超えてから

### 旅行会社とのアフィリエイト

- **対象**: JTB、楽天トラベル、じゃらん等
- **配置**: 保存済みプラン詳細画面に控えめなバナー
- **想定収益**: 予約額の3〜5%
- **実装時期**: ユーザー数500人超えてから

### 企業向けプラン（B2B）

- **対象**: 社員旅行・研修旅行を企画する企業
- **価格**: ¥10,000/月（10名まで）
- **機能**: 管理者ダッシュボード、複数プランの一括管理
- **実装時期**: サービス安定後（1年後目安）

## 検討したが採用しなかった手法

### ❌ アフィリエイトのみ

**不採用理由:**

- ホテル・交通機関の予約機能が必要（開発コストが高い）
- ユーザー体験を損なう可能性（外部サイトへの誘導）
- 収益が不安定（予約されなければ0円）

### ❌ 従量課金制

例: スポット検索1回10円、AIルート生成1回50円

**不採用理由:**

- ユーザーが「使うたびにお金がかかる」ストレスを感じる
- 管理画面（利用履歴・請求額表示）の開発コストが高い
- 少額決済の心理的ハードルが高い

### ❌ 広告のみ

**不採用理由:**

- 収益化までに大量のユーザーが必要（数万〜数十万DAU）
- API費用をカバーできるまで時間がかかる
- 広告過多でUXが悪化するリスク

## 実装ロードマップ

### フェーズ1: 初期（〜3ヶ月）

- [x] MVP機能の完成
- [ ] Google AdSense導入
- [ ] ユーザー獲得施策（SNS発信、口コミ）
- [ ] 利用状況の分析（どの機能がよく使われるか）

### フェーズ2: 成長期（3〜6ヶ月）

- [ ] Stripe連携
- [ ] 有料プラン機能の実装
  - [ ] サブスクリプション管理
  - [ ] 機能制限ロジック
  - [ ] 決済フロー
- [ ] **AI機能 Phase 1の実装**
  - [ ] AI旅程アドバイザー
    - [ ] OpenAI API連携
    - [ ] 最適化ロジック実装
    - [ ] 理由説明生成
    - [ ] 代替案提示機能
  - [ ] プロンプトエンジニアリング
  - [ ] レスポンス品質の検証
- [ ] 有料プラン告知（既存ユーザーへのアナウンス）
- [ ] ベータ版有料プラン提供（割引価格）

### フェーズ3: 拡大期（6ヶ月〜1年）

- [ ] 正式な有料プランリリース
- [ ] **AI機能 Phase 2の実装**
  - [ ] 旅程自動調整アシスタント
  - [ ] パーソナライズされたスポット提案
  - [ ] ユーザー履歴データベース設計
  - [ ] 推薦アルゴリズムの実装
- [ ] **AI機能 Phase 3の実装**
  - [ ] AIチャットコンシェルジュ
  - [ ] 振り返りレポート生成
  - [ ] SNSシェア機能
- [ ] アフィリエイト・コラボ検討
- [ ] 企業向けプラン検討

## 成功指標（KPI）

### 短期（3ヶ月）

- 総ユーザー数: 500人
- アクティブユーザー率: 30%以上
- 広告収益: ¥2,000/月以上

### 中期（6ヶ月）

- 総ユーザー数: 1,000人
- 有料プラン転換率: 5%以上
- 月間収益: ¥30,000以上
- 収支: 黒字化

### 長期（1年）

- 総ユーザー数: 3,000人
- 有料プラン転換率: 8%以上
- 月間収益: ¥100,000以上
- 利益率: 50%以上

## まとめ

tabijiの収益化戦略は、**ユーザー体験を損なわずに段階的に収益化**することを重視します。

1. **今すぐ**: 広告（控えめ）を実装してAPI費用をカバー
2. **MVP後（3〜6ヶ月後）**: 有料プラン（¥300/¥600）を段階的に導入
3. **1年後**: ユーザー数に応じてアフィリエイトやスポンサーシップを検討

この戦略により、**持続可能な成長**と**ユーザーの満足度維持**を両立できると考えます。
