# UI仕様書

## サイトマップ（MVP）

### **Bot（トーク画面）**

#### ウェルカムメッセージ
- カジュアルトーン
- サービス概要（簡潔）
- 主な機能を箇条書き（例：日程入力／スポット選択／自動旅程作成）
- Flex Message：
  - [プラン作成を始める]（LIFF 起動）
  - [サービス概要を見る]（Bot が詳細説明を再送）

#### リッチメニュー（簡単操作コマンド／6 分割）
- **プラン作成を始める**（LIFF 起動）
- **保存済みプラン一覧**
- **ヘルプ**
  - Bot が Flex Message で案内を返す
    - タイトル：使い方ガイド
    - 説明文：LIFF 画面で手順を確認できます
    - ボタン：[ヘルプを開く]（LIFF 起動）
- **サービス概要**（再表示）
  - Bot がカジュアルなトーンで詳細説明を返す
  - 内容：利用シーン、流れ（ステップ 1〜3）、保存済みプランの案内
- **問い合わせ／フィードバック**
  - Bot が Flex Message で案内を返す
    - タイトル：フィードバック・お問い合わせ
    - 説明文：改善点や不具合があればフォームから送信ください
    - ボタン：[フォームを開く]（Google フォーム URL）

### **LIFF アプリ**

#### メインナビゲーション
- **ステップ式 UI**（日程入力〜結果画面まで）
- **保存済みプラン一覧**
- **ヘルプ画面**

#### ヘルプ画面
- タイトル：「tabiji の使い方」
- ステップごとの説明
  1. プラン作成開始（Bot から LIFF を開く）
  2. 日程入力（カレンダー UI）
  3. エリア／スポット選択（マップ＋カード UI）
  4. 旅程結果確認（旅程表／マップ切替タブ）
  5. 保存＆シェア（トーク欄に Flex Message 投稿）
- 各ステップごとに図解画像＋テキスト解説
- ページ下部：「プラン作成を始める」ボタン

## LIFF アプリ（ステップ式 UI）詳細

### **ステップ 1：日程入力**
- カレンダー UI で開始日・終了日を選択
- 選択範囲をハイライト表示
- 開始日・終了日のテキスト表示
- 自動算出された日数（例：2 泊 3 日）
- 「次へ」ボタン

### **ステップ 2：地図 UI**
- 日本全体マップ表示
- 地方選択 → 都道府県選択（マップズーム）
- おすすめスポット（ピン表示）
- スポット選択（複数可／LINE トーク入力スポットも追加可能）
- 下部にカード形式のスポット一覧（横スワイプ可能）
  - 画像（サムネイル）
  - スポット名
  - 一言概要
  - チェックボックス（選択状態をマップのピンと同期）
- LINE トーク入力スポットもカードに追加表示
- 「旅程を生成」ボタン

### **結果画面**

#### 基本構成
- プランタイトル（自動生成＋編集可）
- タブ切替（旅程表／マップ）

#### タブ ① 旅程表
- トグルスイッチで切替
  - **順序のみビュー**
    - 日付ごとにスポットの順序をリスト表示
    - スポット名のみ
  - **時間付きビュー**
    - 日付ごとに訪問予定時刻とスポットを表示
    - 移動時間（徒歩のみ、目安）も表示
    - 訪問予定時刻は自動計算された値を表示
    - 訪問予定時刻は `<input type="time">` を利用した時刻ピッカーでインライン修正可能

#### タブ ② マップ
- **スポット表示**（番号付きピン）
  - 緑：スタート / 青：通常 / 赤：ゴール
  - ピンタップ → ポップアップ表示
    - スポット名
    - サムネイル画像
- **ルート表示**
  - 徒歩モード（Google Directions API）
  - 日ごとのタブ切替
  - 選択中の日付のルートを濃い線で表示
  - 他の日付のルートは薄く表示
- **ズーム・フォーカス**
  - 初期表示：その日のルート全体が収まるように自動調整
  - ピンタップでスポットにズームイン

#### プラン保存ボタン
- 保存時に形式選択：順序のみ／時間付き
- DB に保存
- グループのトーク欄に Flex Message 投稿
  - タイトル（例：東京 2 泊 3 日プラン）
  - 日程（開始日〜終了日）
  - スポット概要
    - 1〜4 件：全件表示
    - 5 件以上：先頭 3〜4 件＋「...」
  - 「詳細を見る」ボタン（LIFF 遷移）

## 保存済みプラン一覧

### **一覧画面**

#### 表示形式
- 縦スクロールのカード一覧

#### カード構成
- **ヘッダー画像**
  - 固定イラスト（例：旅行／地図イメージ）
  - 将来的にはユーザー投稿写真を利用可能
- **プランタイトル**
  - 例：「東京 2 泊 3 日プラン」
- **日程**
  - 開始日〜終了日（例：2025/05/02〜2025/05/04）
- **スポットサマリー**
  - スポット名を最大 3〜4 件表示
  - 5 件以上は「…」で省略
- **操作要素**
  - 「詳細を見る」ボタン（→ 詳細画面へ遷移）
  - 将来的に「削除」や「複製」アイコン追加の余地あり

#### 並び順
- プラン開始日が近いものから昇順に表示
- 過去のプランは下部にまとめてもよい（MVP では全件昇順でも OK）

### **詳細画面**
- 結果画面と同じ UI（旅程表タブ／マップタブ切替）
- タイトル編集可能
- 将来的には「シェア」や「複製」機能を追加できる想定

## UI実装時の注意点

### レスポンシブデザイン
- LIFF アプリはモバイルファースト
- タブレット表示も考慮

### アクセシビリティ
- 色覚異常に配慮した色使い
- タップ領域は44px以上確保

### パフォーマンス
- 地図の遅延読み込み
- 画像の最適化