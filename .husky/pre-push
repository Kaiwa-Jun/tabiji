#!/bin/sh

# pre-pushフック - プッシュ前にテスト、型チェック、ビルドを実行
echo "🚀 Running pre-push checks..."

# 型チェックを実行
echo "📝 Checking TypeScript types..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "❌ Type check failed. Please fix type errors before pushing."
  exit 1
fi

# Lintチェックを実行
echo "🔍 Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo "❌ Lint check failed. Please fix lint errors before pushing."
  exit 1
fi

# テストを実行
echo "🧪 Running tests..."
npm test
if [ $? -ne 0 ]; then
  echo "❌ Tests failed. Please fix failing tests before pushing."
  exit 1
fi

# ビルドを実行
echo "🏗️  Building application..."
npm run build
if [ $? -ne 0 ]; then
  echo "❌ Build failed. Please fix build errors before pushing."
  exit 1
fi

echo "✅ All pre-push checks passed! Pushing to remote repository..."