#!/bin/sh

# pre-pushãƒ•ãƒƒã‚¯ - ãƒ—ãƒƒã‚·ãƒ¥å‰ã«ãƒ†ã‚¹ãƒˆã€å‹ãƒã‚§ãƒƒã‚¯ã€ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œ
echo "ğŸš€ Running pre-push checks..."

# å‹ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
echo "ğŸ“ Checking TypeScript types..."
npm run type-check
if [ $? -ne 0 ]; then
  echo "âŒ Type check failed. Please fix type errors before pushing."
  exit 1
fi

# Lintãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
echo "ğŸ” Running ESLint..."
npm run lint
if [ $? -ne 0 ]; then
  echo "âŒ Lint check failed. Please fix lint errors before pushing."
  exit 1
fi

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
echo "ğŸ§ª Running tests..."
npm test
if [ $? -ne 0 ]; then
  echo "âŒ Tests failed. Please fix failing tests before pushing."
  exit 1
fi

# ãƒ“ãƒ«ãƒ‰ã‚’å®Ÿè¡Œ
echo "ğŸ—ï¸  Building application..."
npm run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed. Please fix build errors before pushing."
  exit 1
fi

echo "âœ… All pre-push checks passed! Pushing to remote repository..."